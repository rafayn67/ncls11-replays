{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCL/NCLS11/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,0NAAY,EAClC,QAAQ,GAAG,CAAC,YAAY,EACxB,QAAQ,GAAG,CAAC,yBAAyB"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCL/NCLS11/app/api/replays/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const url = new URL(req.url);\r\n    const division = url.searchParams.get(\"division\");\r\n    const week = url.searchParams.get(\"week\");\r\n\r\n    console.log(\"DIVISION:\", division, \"WEEK:\", week);\r\n\r\n    const { data, error } = await supabase.storage\r\n      .from(\"replays\")\r\n      .list(`d${division}/w${week}`);\r\n\r\n    console.log(\"SUPABASE ERROR:\", error);\r\n    console.log(\"SUPABASE DATA:\", data);\r\n\r\n    if (error) throw new Error(error.message);\r\n\r\n    const files = data\r\n      ?.filter(f => f.name.endsWith(\".html\"))\r\n      .map(f => f.name) || [];\r\n\r\n    return NextResponse.json({ files });\r\n  } catch (err: any) {\r\n    console.error(\"API ROUTE ERROR:\", err);\r\n    return NextResponse.json({ error: err.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const formData = await req.formData();\r\n  const file = formData.get(\"file\") as File;\r\n  const division = formData.get(\"division\") as string;\r\n  const week = formData.get(\"week\") as string;\r\n\r\n  if (!file || !division || !week) {\r\n    return NextResponse.json({ error: \"Missing file, division, or week\" }, { status: 400 });\r\n  }\r\n\r\n  const filePath = `d${division}/w${week}/${file.name}`;\r\n\r\n  const { error } = await supabase.storage\r\n    .from(\"replays\")\r\n    .upload(filePath, file.stream(), { upsert: true });\r\n\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n\r\n  return NextResponse.json({ message: \"File uploaded successfully\", path: filePath });\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,MAAM,WAAW,IAAI,YAAY,CAAC,GAAG,CAAC;QACtC,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC;QAElC,QAAQ,GAAG,CAAC,aAAa,UAAU,SAAS;QAE5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,WACL,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,MAAM;QAE/B,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,IAAI,OAAO,MAAM,IAAI,MAAM,MAAM,OAAO;QAExC,MAAM,QAAQ,MACV,OAAO,CAAA,IAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,UAC7B,IAAI,CAAA,IAAK,EAAE,IAAI,KAAK,EAAE;QAEzB,OAAO,iKAAY,CAAC,IAAI,CAAC;YAAE;QAAM;IACnC,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,iKAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,WAAW,MAAM,IAAI,QAAQ;IACnC,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM;QAC/B,OAAO,iKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvF;IAEA,MAAM,WAAW,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,KAAK,CAAC,EAAE,KAAK,IAAI,EAAE;IAErD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CAAC,OAAO,CACrC,IAAI,CAAC,WACL,MAAM,CAAC,UAAU,KAAK,MAAM,IAAI;QAAE,QAAQ;IAAK;IAElD,IAAI,OAAO,OAAO,iKAAY,CAAC,IAAI,CAAC;QAAE,OAAO,MAAM,OAAO;IAAC,GAAG;QAAE,QAAQ;IAAI;IAE5E,OAAO,iKAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAA8B,MAAM;IAAS;AACnF"}}]
}