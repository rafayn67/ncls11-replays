{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCLS11/lib/supabaseServer.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const createSupabaseServer = () => {\r\n  const SUPABASE_URL = \"https://odfnasavfwviywqjwgwn.supabase.co\";\r\n  const SUPABASE_ANON_KEY =\r\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kZm5hc2F2Znd2aXl3cWp3Z3duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNTA0MTksImV4cCI6MjA3OTkyNjQxOX0.nR7O8E-9jG_HaPUo5CCAv5KfIAyvuGLkM16lHUXboeo\";\r\n\r\n  return createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\n};\r\n\r\nexport const getReplayUrl = async (filename: string) => {\r\n  const supabase = createSupabaseServer();\r\n  const { data } = supabase.storage\r\n    .from(\"replays\")\r\n    .getPublicUrl(filename);\r\n  return data.publicUrl;\r\n};"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,uBAAuB;IAClC,MAAM,eAAe;IACrB,MAAM,oBACJ;IAEF,OAAO,IAAA,0MAAY,EAAC,cAAc;AACpC;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,WAAW;IACjB,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAC9B,IAAI,CAAC,WACL,YAAY,CAAC;IAChB,OAAO,KAAK,SAAS;AACvB"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCLS11/components/ReplayEmbed.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\n\r\ninterface ReplayViewerProps {\r\n  battleLog: string;\r\n}\r\n\r\nexport default function ReplayViewer({ battleLog }: ReplayViewerProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const scripts = [\r\n      \"https://play.pokemonshowdown.com/config.js\",\r\n      \"https://code.jquery.com/jquery-3.7.0.min.js\",\r\n      \"https://play.pokemonshowdown.com/js/battle.js\",\r\n      \"https://play.pokemonshowdown.com/js/battle-log.js\",\r\n      \"https://play.pokemonshowdown.com/js/battle-tooltips.js\",\r\n      \"https://play.pokemonshowdown.com/js/battle-animations.js\",\r\n      \"https://play.pokemonshowdown.com/js/replay-viewer.js\",\r\n      \"https://play.pokemonshowdown.com/js/replay-embed.js\",\r\n    ];\r\n\r\n\r\n    let i = 0;\r\n\r\n    const loadNext = () => {\r\n      if (i >= scripts.length) {\r\n        // @ts-ignore\r\n        new window.ReplayEmbed(containerRef.current, { log: battleLog });\r\n        return;\r\n      }\r\n\r\n      const s = document.createElement(\"script\");\r\n      s.src = scripts[i++];\r\n      s.onload = loadNext;\r\n      document.body.appendChild(s);\r\n    };\r\n\r\n    loadNext();\r\n\r\n    return () => {\r\n      // Remove dynamically inserted scripts\r\n      scripts.forEach(src => {\r\n        const el = document.querySelector(`script[src=\"${src}\"]`);\r\n        if (el) el.remove();\r\n      });\r\n\r\n      // @ts-ignore\r\n      window.ReplayEmbed?.destroy?.();\r\n    };\r\n  }, [battleLog]);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ width: \"100%\", height: \"600px\" }} />\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAQe,SAAS,aAAa,EAAE,SAAS,EAAqB;;IACnE,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAE5C,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,aAAa,OAAO,EAAE;YAE3B,MAAM,UAAU;gBACd;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YAGD,IAAI,IAAI;YAER,MAAM;mDAAW;oBACf,IAAI,KAAK,QAAQ,MAAM,EAAE;wBACvB,aAAa;wBACb,IAAI,OAAO,WAAW,CAAC,aAAa,OAAO,EAAE;4BAAE,KAAK;wBAAU;wBAC9D;oBACF;oBAEA,MAAM,IAAI,SAAS,aAAa,CAAC;oBACjC,EAAE,GAAG,GAAG,OAAO,CAAC,IAAI;oBACpB,EAAE,MAAM,GAAG;oBACX,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC5B;;YAEA;YAEA;0CAAO;oBACL,sCAAsC;oBACtC,QAAQ,OAAO;kDAAC,CAAA;4BACd,MAAM,KAAK,SAAS,aAAa,CAAC,CAAC,YAAY,EAAE,IAAI,EAAE,CAAC;4BACxD,IAAI,IAAI,GAAG,MAAM;wBACnB;;oBAEA,aAAa;oBACb,OAAO,WAAW,EAAE;gBACtB;;QACF;iCAAG;QAAC;KAAU;IAEd,qBACE,6LAAC;QAAI,KAAK;QAAc,OAAO;YAAE,OAAO;YAAQ,QAAQ;QAAQ;;;;;;AAEpE;GAlDwB;KAAA"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCLS11/app/division/%5Bid%5D/week/%5Bweek%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { createSupabaseServer } from \"@/lib/supabaseServer\";\r\nimport { useEffect, useState } from \"react\";\r\nimport ReplayEmbed from \"@/components/ReplayEmbed\";\r\n\r\nexport default function WeekPage() {\r\n  const params = useParams();\r\n  const id = params.id;\r\n  const week = params.week;\r\n\r\n  const [replays, setReplays] = useState<any[]>([]);\r\n  const [selectedBattleLog, setSelectedBattleLog] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchReplays = async () => {\r\n      const supabase = createSupabaseServer();\r\n      const { data } = await supabase\r\n        .from(\"replays\")\r\n        .select(\"id, team1, team2, file_url\")\r\n        .eq(\"division\", Number(id))\r\n        .eq(\"week\", Number(week));\r\n\r\n      setReplays(data || []);\r\n    };\r\n\r\n    fetchReplays();\r\n  }, [id, week]);\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", padding: 40, gap: 20 }}>\r\n      {/* Left: list of replays */}\r\n      <div style={{ width: \"300px\" }}>\r\n        <h1>Division {id} â€” Week {week}</h1>\r\n        {!replays.length && <p>No replays uploaded yet.</p>}\r\n        {replays.map((r) => (\r\n          <div key={r.id} style={{ marginBottom: 10 }}>\r\n            <strong>{r.team1} vs {r.team2}</strong>\r\n            <br />\r\n            <button\r\n              style={{ marginTop: 4, padding: \"4px 8px\" }}\r\n              onClick={() => setSelectedBattleLog(r.file_url)}\r\n            >\r\n              View Replay\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Right: interactive replay */}\r\n      <div style={{ flex: 1, border: \"1px solid #ccc\", height: \"600px\" }}>\r\n        {selectedBattleLog ? (\r\n          <ReplayEmbed battleLog={selectedBattleLog} />\r\n        ) : (\r\n          <p style={{ padding: 20 }}>Click a replay to view it here.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,OAAO,OAAO,IAAI;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAgB;IAE1E,IAAA,0KAAS;8BAAC;YACR,MAAM;mDAAe;oBACnB,MAAM,WAAW,IAAA,gJAAoB;oBACrC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,WACL,MAAM,CAAC,8BACP,EAAE,CAAC,YAAY,OAAO,KACtB,EAAE,CAAC,QAAQ,OAAO;oBAErB,WAAW,QAAQ,EAAE;gBACvB;;YAEA;QACF;6BAAG;QAAC;QAAI;KAAK;IAEb,qBACE,6LAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,SAAS;YAAI,KAAK;QAAG;;0BAElD,6LAAC;gBAAI,OAAO;oBAAE,OAAO;gBAAQ;;kCAC3B,6LAAC;;4BAAG;4BAAU;4BAAG;4BAAS;;;;;;;oBACzB,CAAC,QAAQ,MAAM,kBAAI,6LAAC;kCAAE;;;;;;oBACtB,QAAQ,GAAG,CAAC,CAAC,kBACZ,6LAAC;4BAAe,OAAO;gCAAE,cAAc;4BAAG;;8CACxC,6LAAC;;wCAAQ,EAAE,KAAK;wCAAC;wCAAK,EAAE,KAAK;;;;;;;8CAC7B,6LAAC;;;;;8CACD,6LAAC;oCACC,OAAO;wCAAE,WAAW;wCAAG,SAAS;oCAAU;oCAC1C,SAAS,IAAM,qBAAqB,EAAE,QAAQ;8CAC/C;;;;;;;2BANO,EAAE,EAAE;;;;;;;;;;;0BAclB,6LAAC;gBAAI,OAAO;oBAAE,MAAM;oBAAG,QAAQ;oBAAkB,QAAQ;gBAAQ;0BAC9D,kCACC,6LAAC,wIAAW;oBAAC,WAAW;;;;;yCAExB,6LAAC;oBAAE,OAAO;wBAAE,SAAS;oBAAG;8BAAG;;;;;;;;;;;;;;;;;AAKrC;GArDwB;;QACP,kJAAS;;;KADF"}}]
}