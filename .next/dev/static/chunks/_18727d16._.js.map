{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCLS11/lib/supabaseServer.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const createSupabaseServer = () => {\r\n  const SUPABASE_URL = \"https://odfnasavfwviywqjwgwn.supabase.co\";\r\n  const SUPABASE_ANON_KEY =\r\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kZm5hc2F2Znd2aXl3cWp3Z3duIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNTA0MTksImV4cCI6MjA3OTkyNjQxOX0.nR7O8E-9jG_HaPUo5CCAv5KfIAyvuGLkM16lHUXboeo\";\r\n\r\n  return createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\n};\r\n\r\nexport const getReplayUrl = async (filename: string) => {\r\n  const supabase = createSupabaseServer();\r\n  const { data } = supabase.storage\r\n    .from(\"replays\")\r\n    .getPublicUrl(filename);\r\n  return data.publicUrl;\r\n};"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,uBAAuB;IAClC,MAAM,eAAe;IACrB,MAAM,oBACJ;IAEF,OAAO,IAAA,0MAAY,EAAC,cAAc;AACpC;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,WAAW;IACjB,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAC9B,IAAI,CAAC,WACL,YAAY,CAAC;IAChB,OAAO,KAAK,SAAS;AACvB"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/NCLS11/app/division/%5Bid%5D/week/%5Bweek%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams } from \"next/navigation\";\r\nimport { createSupabaseServer } from \"@/lib/supabaseServer\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function WeekPage() {\r\n  const params = useParams();\r\n  const id = params.id;\r\n  const week = params.week;\r\n\r\n  const [replays, setReplays] = useState<any[]>([]);\r\n  const [selectedHtml, setSelectedHtml] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchReplays = async () => {\r\n      const supabase = createSupabaseServer();\r\n      const { data } = await supabase\r\n        .from(\"replays\")\r\n        .select(\"id, team1, team2, file_url\") // file_url is the filename in the bucket\r\n        .eq(\"division\", Number(id))\r\n        .eq(\"week\", Number(week));\r\n      setReplays(data || []);\r\n    };\r\n\r\n    fetchReplays();\r\n  }, [id, week]);\r\n\r\n  const handleView = async (filename: string) => {\r\n    const supabase = createSupabaseServer();\r\n    const { data: fileData, error } = await supabase.storage\r\n      .from(\"replays\")\r\n      .download(filename);\r\n\r\n    if (error) {\r\n      console.error(\"Failed to download file:\", error);\r\n      return;\r\n    }\r\n\r\n    const text = await fileData.text();\r\n    setSelectedHtml(text); // store the raw HTML\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", padding: 40, gap: 20 }}>\r\n      {/* Left: list of replays */}\r\n      <div style={{ width: \"300px\" }}>\r\n        <h1>Division {id} â€” Week {week}</h1>\r\n        {!replays.length && <p>No replays uploaded yet.</p>}\r\n        {replays.map((r) => (\r\n          <div key={r.id} style={{ marginBottom: 10 }}>\r\n            <strong>{r.team1} vs {r.team2}</strong>\r\n            <br />\r\n            <button onClick={() => handleView(r.file_url)}>View Replay</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Right: render the HTML content */}\r\n      <div\r\n        style={{ flex: 1, border: \"1px solid #ccc\", height: \"600px\", overflow: \"auto\", padding: 10 }}\r\n      >\r\n        {selectedHtml ? (\r\n          <div dangerouslySetInnerHTML={{ __html: selectedHtml }} />\r\n        ) : (\r\n          <p>Click a replay to view it here.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,OAAO,OAAO,IAAI;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAEhE,IAAA,0KAAS;8BAAC;YACR,MAAM;mDAAe;oBACnB,MAAM,WAAW,IAAA,gJAAoB;oBACrC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,WACL,MAAM,CAAC,8BAA8B,yCAAyC;qBAC9E,EAAE,CAAC,YAAY,OAAO,KACtB,EAAE,CAAC,QAAQ,OAAO;oBACrB,WAAW,QAAQ,EAAE;gBACvB;;YAEA;QACF;6BAAG;QAAC;QAAI;KAAK;IAEb,MAAM,aAAa,OAAO;QACxB,MAAM,WAAW,IAAA,gJAAoB;QACrC,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,OAAO,CACrD,IAAI,CAAC,WACL,QAAQ,CAAC;QAEZ,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,4BAA4B;YAC1C;QACF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,gBAAgB,OAAO,qBAAqB;IAC9C;IAEA,qBACE,6LAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,SAAS;YAAI,KAAK;QAAG;;0BAElD,6LAAC;gBAAI,OAAO;oBAAE,OAAO;gBAAQ;;kCAC3B,6LAAC;;4BAAG;4BAAU;4BAAG;4BAAS;;;;;;;oBACzB,CAAC,QAAQ,MAAM,kBAAI,6LAAC;kCAAE;;;;;;oBACtB,QAAQ,GAAG,CAAC,CAAC,kBACZ,6LAAC;4BAAe,OAAO;gCAAE,cAAc;4BAAG;;8CACxC,6LAAC;;wCAAQ,EAAE,KAAK;wCAAC;wCAAK,EAAE,KAAK;;;;;;;8CAC7B,6LAAC;;;;;8CACD,6LAAC;oCAAO,SAAS,IAAM,WAAW,EAAE,QAAQ;8CAAG;;;;;;;2BAHvC,EAAE,EAAE;;;;;;;;;;;0BASlB,6LAAC;gBACC,OAAO;oBAAE,MAAM;oBAAG,QAAQ;oBAAkB,QAAQ;oBAAS,UAAU;oBAAQ,SAAS;gBAAG;0BAE1F,6BACC,6LAAC;oBAAI,yBAAyB;wBAAE,QAAQ;oBAAa;;;;;yCAErD,6LAAC;8BAAE;;;;;;;;;;;;;;;;;AAKb;GAhEwB;;QACP,kJAAS;;;KADF"}}]
}